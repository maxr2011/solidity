{"ast":null,"code":"/*\r\n    This file is part of web3.js.\r\n\r\n    web3.js is free software: you can redistribute it and/or modify\r\n    it under the terms of the GNU Lesser General Public License as published by\r\n    the Free Software Foundation, either version 3 of the License, or\r\n    (at your option) any later version.\r\n\r\n    web3.js is distributed in the hope that it will be useful,\r\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n    GNU Lesser General Public License for more details.\r\n\r\n    You should have received a copy of the GNU Lesser General Public License\r\n    along with web3.js.  If not, see <http://www.gnu.org/licenses/>.\r\n*/\n\n/**\r\n * @file param.js\r\n * @author Marek Kotewicz <marek@parity.io>\r\n * @date 2015\r\n */\nvar formatters = require('./formatters.js');\n/**\r\n * SolidityParam object prototype.\r\n * Should be used when encoding, decoding solidity bytes\r\n */\n\n\nvar SolidityParam = function (value, offset, rawValue) {\n  this.value = value || '';\n  this.offset = offset; // offset in bytes\n\n  this.rawValue = rawValue; // used for debugging\n};\n/**\r\n * This method should be used to get length of params's dynamic part\r\n *\r\n * @method dynamicPartLength\r\n * @returns {Number} length of dynamic part (in bytes)\r\n */\n\n\nSolidityParam.prototype.dynamicPartLength = function () {\n  return this.dynamicPart().length / 2;\n};\n/**\r\n * This method should be used to create copy of solidity param with different offset\r\n *\r\n * @method withOffset\r\n * @param {Number} offset length in bytes\r\n * @returns {SolidityParam} new solidity param with applied offset\r\n */\n\n\nSolidityParam.prototype.withOffset = function (offset) {\n  return new SolidityParam(this.value, offset);\n};\n/**\r\n * This method should be used to combine solidity params together\r\n * eg. when appending an array\r\n *\r\n * @method combine\r\n * @param {SolidityParam} param with which we should combine\r\n * @param {SolidityParam} result of combination\r\n */\n\n\nSolidityParam.prototype.combine = function (param) {\n  return new SolidityParam(this.value + param.value);\n};\n/**\r\n * This method should be called to check if param has dynamic size.\r\n * If it has, it returns true, otherwise false\r\n *\r\n * @method isDynamic\r\n * @returns {Boolean}\r\n */\n\n\nSolidityParam.prototype.isDynamic = function () {\n  return this.offset !== undefined;\n};\n/**\r\n * This method should be called to transform offset to bytes\r\n *\r\n * @method offsetAsBytes\r\n * @returns {String} bytes representation of offset\r\n */\n\n\nSolidityParam.prototype.offsetAsBytes = function () {\n  return !this.isDynamic() ? '' : formatters.toTwosComplement(this.offset).replace('0x', '');\n};\n/**\r\n * This method should be called to get static part of param\r\n *\r\n * @method staticPart\r\n * @returns {String} offset if it is a dynamic param, otherwise value\r\n */\n\n\nSolidityParam.prototype.staticPart = function () {\n  if (!this.isDynamic()) {\n    return this.value;\n  }\n\n  return this.offsetAsBytes();\n};\n/**\r\n * This method should be called to get dynamic part of param\r\n *\r\n * @method dynamicPart\r\n * @returns {String} returns a value if it is a dynamic param, otherwise empty string\r\n */\n\n\nSolidityParam.prototype.dynamicPart = function () {\n  return this.isDynamic() ? this.value : '';\n};\n/**\r\n * This method should be called to encode param\r\n *\r\n * @method encode\r\n * @returns {String}\r\n */\n\n\nSolidityParam.prototype.encode = function () {\n  return this.staticPart() + this.dynamicPart();\n};\n/**\r\n * This method should be called to encode array of params\r\n *\r\n * @method encodeList\r\n * @param {Array[SolidityParam]} params\r\n * @returns {String}\r\n */\n\n\nSolidityParam.encodeList = function (params) {\n  // updating offsets\n  var totalOffset = params.length * 32;\n  var offsetParams = params.map(function (param) {\n    if (!param.isDynamic()) {\n      return param;\n    }\n\n    var offset = totalOffset;\n    totalOffset += param.dynamicPartLength();\n    return param.withOffset(offset);\n  }); // encode everything!\n\n  return offsetParams.reduce(function (result, param) {\n    return result + param.dynamicPart();\n  }, offsetParams.reduce(function (result, param) {\n    return result + param.staticPart();\n  }, ''));\n};\n\nmodule.exports = SolidityParam;","map":{"version":3,"sources":["C:/Users/Blockchain FWPM/Desktop/N/solidity/src/eventManagerTruffle/client/node_modules/drizzle/node_modules/web3-eth-abi/src/param.js"],"names":["formatters","require","SolidityParam","value","offset","rawValue","prototype","dynamicPartLength","dynamicPart","length","withOffset","combine","param","isDynamic","undefined","offsetAsBytes","toTwosComplement","replace","staticPart","encode","encodeList","params","totalOffset","offsetParams","map","reduce","result","module","exports"],"mappings":"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","sourcesContent":["/*\r\n    This file is part of web3.js.\r\n\r\n    web3.js is free software: you can redistribute it and/or modify\r\n    it under the terms of the GNU Lesser General Public License as published by\r\n    the Free Software Foundation, either version 3 of the License, or\r\n    (at your option) any later version.\r\n\r\n    web3.js is distributed in the hope that it will be useful,\r\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n    GNU Lesser General Public License for more details.\r\n\r\n    You should have received a copy of the GNU Lesser General Public License\r\n    along with web3.js.  If not, see <http://www.gnu.org/licenses/>.\r\n*/\r\n/**\r\n * @file param.js\r\n * @author Marek Kotewicz <marek@parity.io>\r\n * @date 2015\r\n */\r\n\r\nvar formatters = require('./formatters.js');\r\n\r\n/**\r\n * SolidityParam object prototype.\r\n * Should be used when encoding, decoding solidity bytes\r\n */\r\nvar SolidityParam = function (value, offset, rawValue) {\r\n    this.value = value || '';\r\n    this.offset = offset; // offset in bytes\r\n    this.rawValue = rawValue; // used for debugging\r\n};\r\n\r\n/**\r\n * This method should be used to get length of params's dynamic part\r\n *\r\n * @method dynamicPartLength\r\n * @returns {Number} length of dynamic part (in bytes)\r\n */\r\nSolidityParam.prototype.dynamicPartLength = function () {\r\n    return this.dynamicPart().length / 2;\r\n};\r\n\r\n/**\r\n * This method should be used to create copy of solidity param with different offset\r\n *\r\n * @method withOffset\r\n * @param {Number} offset length in bytes\r\n * @returns {SolidityParam} new solidity param with applied offset\r\n */\r\nSolidityParam.prototype.withOffset = function (offset) {\r\n    return new SolidityParam(this.value, offset);\r\n};\r\n\r\n/**\r\n * This method should be used to combine solidity params together\r\n * eg. when appending an array\r\n *\r\n * @method combine\r\n * @param {SolidityParam} param with which we should combine\r\n * @param {SolidityParam} result of combination\r\n */\r\nSolidityParam.prototype.combine = function (param) {\r\n    return new SolidityParam(this.value + param.value);\r\n};\r\n\r\n/**\r\n * This method should be called to check if param has dynamic size.\r\n * If it has, it returns true, otherwise false\r\n *\r\n * @method isDynamic\r\n * @returns {Boolean}\r\n */\r\nSolidityParam.prototype.isDynamic = function () {\r\n    return this.offset !== undefined;\r\n};\r\n\r\n/**\r\n * This method should be called to transform offset to bytes\r\n *\r\n * @method offsetAsBytes\r\n * @returns {String} bytes representation of offset\r\n */\r\nSolidityParam.prototype.offsetAsBytes = function () {\r\n    return !this.isDynamic() ? '' : formatters.toTwosComplement(this.offset).replace('0x','');\r\n};\r\n\r\n/**\r\n * This method should be called to get static part of param\r\n *\r\n * @method staticPart\r\n * @returns {String} offset if it is a dynamic param, otherwise value\r\n */\r\nSolidityParam.prototype.staticPart = function () {\r\n    if (!this.isDynamic()) {\r\n        return this.value;\r\n    }\r\n    return this.offsetAsBytes();\r\n};\r\n\r\n/**\r\n * This method should be called to get dynamic part of param\r\n *\r\n * @method dynamicPart\r\n * @returns {String} returns a value if it is a dynamic param, otherwise empty string\r\n */\r\nSolidityParam.prototype.dynamicPart = function () {\r\n    return this.isDynamic() ? this.value : '';\r\n};\r\n\r\n/**\r\n * This method should be called to encode param\r\n *\r\n * @method encode\r\n * @returns {String}\r\n */\r\nSolidityParam.prototype.encode = function () {\r\n    return this.staticPart() + this.dynamicPart();\r\n};\r\n\r\n/**\r\n * This method should be called to encode array of params\r\n *\r\n * @method encodeList\r\n * @param {Array[SolidityParam]} params\r\n * @returns {String}\r\n */\r\nSolidityParam.encodeList = function (params) {\r\n\r\n    // updating offsets\r\n    var totalOffset = params.length * 32;\r\n    var offsetParams = params.map(function (param) {\r\n        if (!param.isDynamic()) {\r\n            return param;\r\n        }\r\n        var offset = totalOffset;\r\n        totalOffset += param.dynamicPartLength();\r\n        return param.withOffset(offset);\r\n    });\r\n\r\n    // encode everything!\r\n    return offsetParams.reduce(function (result, param) {\r\n        return result + param.dynamicPart();\r\n    }, offsetParams.reduce(function (result, param) {\r\n        return result + param.staticPart();\r\n    }, ''));\r\n};\r\n\r\n\r\n\r\nmodule.exports = SolidityParam;\r\n\r\n"]},"metadata":{},"sourceType":"script"}